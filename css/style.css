/* ==========================================================================
   Design for AI - A Reader
   Main stylesheet - structure and visual design
   ========================================================================== */

/* --------------------------------------------------------------------------
   CSS Custom Properties (variables)
   Use these for consistent colors, spacing, and typography across the site.
   -------------------------------------------------------------------------- */
:root {
  --color-bg: #000;
  --color-text: #fff;
  --color-text-muted: #ccc;
  --color-text-dim: #666;
  --color-text-quiet: #999;
  --color-border: #333;
  --color-accent: #8b5cf6;
  --color-accent-hover: #8b5cf6;
  --color-quote-cite: #888;
  /* Rainbow gradient: same spectrum as cursor trail (hsl hue 0–360, 70% sat, 65% light) */
  --rainbow-hover: linear-gradient(
    90deg,
    hsl(0, 70%, 65%),
    hsl(45, 70%, 65%),
    hsl(120, 70%, 65%),
    hsl(180, 70%, 65%),
    hsl(240, 70%, 65%),
    hsl(300, 70%, 65%),
    hsl(360, 70%, 65%)
  );
  /* Wash gradient: rest color left half, rainbow right half – animate background-position for “washing” effect */
  --rainbow-wash-intro: linear-gradient(
    90deg,
    var(--color-text-muted) 0%,
    var(--color-text-muted) 50%,
    hsl(350, 45%, 52%) 52%,
    hsl(25, 55%, 58%) 58%,
    hsl(45, 70%, 65%) 65%,
    hsl(120, 70%, 65%) 70%,
    hsl(180, 70%, 65%) 80%,
    hsl(240, 70%, 65%) 88%,
    hsl(300, 70%, 65%) 94%,
    hsl(360, 70%, 65%) 100%
  );
  --rainbow-wash-card: linear-gradient(
    90deg,
    #e8e8e8 0%,
    #e8e8e8 50%,
    hsl(0, 70%, 65%) 52%,
    hsl(45, 70%, 65%) 60%,
    hsl(120, 70%, 65%) 70%,
    hsl(180, 70%, 65%) 80%,
    hsl(240, 70%, 65%) 88%,
    hsl(300, 70%, 65%) 94%,
    hsl(360, 70%, 65%) 100%
  );
  /* Diagonal wash for highlight cards (top-left to bottom-right) */
  --rainbow-wash-ltdr: linear-gradient(
    135deg,
    var(--color-text-muted) 0%,
    var(--color-text-muted) 45%,
    hsl(0, 70%, 65%) 48%,
    hsl(45, 70%, 65%) 58%,
    hsl(120, 70%, 65%) 68%,
    hsl(180, 70%, 65%) 78%,
    hsl(240, 70%, 65%) 86%,
    hsl(300, 70%, 65%) 92%,
    hsl(360, 70%, 65%) 100%
  );
  --rainbow-wash-footer: linear-gradient(
    90deg,
    #e8e8e8 0%,
    #e8e8e8 50%,
    hsl(0, 70%, 65%) 52%,
    hsl(45, 70%, 65%) 60%,
    hsl(120, 70%, 65%) 70%,
    hsl(180, 70%, 65%) 80%,
    hsl(240, 70%, 65%) 88%,
    hsl(300, 70%, 65%) 94%,
    hsl(360, 70%, 65%) 100%
  );

  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-size-intro: 28px;
  --font-size-nav: 16px;
  --font-size-card-title: 16px;
  --font-size-card-desc: 14px;
  --font-size-footer: 48px;
  --font-size-smiley: 52px;
  --font-weight-light: 300;
  --font-weight-normal: 400;
  --line-height-body: 1.6;
  --letter-spacing-tight: -0.7px;

  --spacing-page: 20px;
  --spacing-page-bottom: 40px;
  --spacing-section: 40px;
  --spacing-grid-gap: 40px 30px;
  --max-width-container: 1200px;
  --max-width-content: 800px;
}

/* --------------------------------------------------------------------------
   Reset & base
   -------------------------------------------------------------------------- */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background-color: var(--color-bg);
  color: var(--color-text);
  font-family: var(--font-family);
  line-height: var(--line-height-body);
  padding: var(--spacing-page) 0 var(--spacing-page-bottom);
  cursor: none;
  overflow-x: hidden;
}

/* --------------------------------------------------------------------------
   Rainbow trail canvas (background layer)
   -------------------------------------------------------------------------- */
#rainbow-canvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9999;
}

/* Gradient overlay when a tension is selected (freeform, trail colors) */
.themes-gradient-overlay {
  position: fixed;
  inset: 0;
  z-index: 0;
  opacity: 0;
  pointer-events: none;
  transition: opacity 1.6s cubic-bezier(0.22, 1, 0.36, 1) 0.12s;
}

body.tension-view .themes-gradient-overlay {
  opacity: 1;
  /* All trail cursor colors: red, orange, yellow, green, cyan, blue, magenta (hsl 70% sat, 65% light) */
  background:
    radial-gradient(ellipse 90% 70% at 10% 20%, hsl(0, 70%, 65%), transparent 55%),
    radial-gradient(ellipse 80% 80% at 90% 15%, hsl(45, 70%, 65%), transparent 50%),
    radial-gradient(ellipse 85% 75% at 85% 85%, hsl(120, 70%, 65%), transparent 55%),
    radial-gradient(ellipse 75% 90% at 15% 80%, hsl(180, 70%, 65%), transparent 55%),
    radial-gradient(ellipse 80% 85% at 50% 50%, hsl(240, 70%, 65%), transparent 55%),
    radial-gradient(ellipse 90% 80% at 70% 60%, hsl(300, 70%, 65%), transparent 50%),
    radial-gradient(ellipse 85% 85% at 30% 40%, hsl(60, 70%, 65%), transparent 50%),
    radial-gradient(ellipse 75% 75% at 95% 70%, hsl(200, 70%, 65%), transparent 50%),
    radial-gradient(ellipse 70% 90% at 5% 50%, hsl(280, 70%, 65%), transparent 50%),
    hsl(330, 60%, 60%);
}

/* --------------------------------------------------------------------------
   Layout container
   -------------------------------------------------------------------------- */
/* Horizontal padding here so logo and all page content share the same left edge */
.container {
  max-width: var(--max-width-container);
  margin: 0 auto;
  padding-left: var(--spacing-page);
  padding-right: var(--spacing-page);
  position: relative;
  z-index: 1;
}

/* --------------------------------------------------------------------------
   Navigation
   -------------------------------------------------------------------------- */
.nav {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--spacing-section);
}

.logo-section {
  display: flex;
  flex-direction: column;
  cursor: pointer;
}

.logo {
  font-size: var(--font-size-intro);
  font-weight: var(--font-weight-light);
  letter-spacing: var(--letter-spacing-tight);
  margin-bottom: -12px;
  transition: color 0.3s ease, background 0.3s ease, -webkit-background-clip 0.3s ease, background-clip 0.3s ease, opacity 0.3s ease;
}

.subtitle-nav {
  color: var(--color-text-dim);
  font-size: var(--font-size-intro);
  font-weight: var(--font-weight-light);
  letter-spacing: var(--letter-spacing-tight);
  transition: color 0.3s ease, background 0.3s ease, -webkit-background-clip 0.3s ease, background-clip 0.3s ease, opacity 0.3s ease;
}

.nav .logo-section:hover .logo,
.nav .logo-section:hover .subtitle-nav,
.nav .logo-section:active .logo,
.nav .logo-section:active .subtitle-nav {
  opacity: 0.8;
}

.nav-links {
  display: flex;
  gap: 40px;
  margin-top: 4px;
}

.nav-links a {
  color: var(--color-text-muted);
  text-decoration: none;
  font-size: var(--font-size-nav);
  font-weight: var(--font-weight-light);
  letter-spacing: 0.3px;
  transition: color 0.3s ease;
  cursor: pointer;
  position: relative;
}

/* Underline: 2px line, 4px below; draws in as black then quickly gets gradient */
.nav-links a::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -4px;
  height: 2px;
  width: 0;
  background: #000;
  box-shadow: 0 0 5px 2px rgba(0, 0, 0, 0.45);
  transition: width 0.22s ease-out, background 0.3s ease 0.15s;
}

.nav-links a:hover::after,
.nav-links a:active::after {
  width: 100%;
  background: var(--rainbow-hover);
  background-size: 100% 100%;
  box-shadow: 0 0 6px 2px rgba(0, 0, 0, 0.35);
}

/* Current page: underline stays visible to mark where you are.
   Delay only on "return" (when no link is hovered), so we don’t bring the line back until we’re sure the user isn’t moving to another button. */
.nav-links a.nav-current::after {
  width: 100%;
  background: var(--rainbow-hover);
  background-size: 100% 100%;
  box-shadow: 0 0 6px 2px rgba(0, 0, 0, 0.35);
  transition: width 0.22s ease-out 0.4s, background 0.3s ease 0.15s;
}

/* When hovering a different link, revert the current page's underline immediately (no delay). */
.nav-links:has(a:hover) .nav-current:not(:hover)::after {
  width: 0;
  transition: width 0.22s ease-out 0s, background 0.3s ease 0.15s;
}

/* --------------------------------------------------------------------------
   Page visibility (single-page app style)
   -------------------------------------------------------------------------- */
.page {
  display: none;
}

.page.active {
  display: block;
}

/* --------------------------------------------------------------------------
   Home page - intro text
   -------------------------------------------------------------------------- */
.intro-text {
  font-size: var(--font-size-intro);
  font-weight: var(--font-weight-light);
  line-height: 1.3;
  margin-bottom: 60px;
  color: var(--color-text-muted);
  max-width: 85%;
  letter-spacing: var(--letter-spacing-tight);
}

/* Wash: gradient slides left so rainbow moves from beginning to end of text */
.intro-text .highlight {
  background: var(--rainbow-wash-intro);
  background-size: 200% 100%;
  background-position: 0% 0;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  transition: background-position 1s cubic-bezier(0.25, 0.46, 0.45, 0.94), -webkit-background-clip 0.35s ease, background-clip 0.35s ease;
}

.intro-text p:hover .highlight {
  background-position: -100% 0;
}

/* Fallback when gradient text isn’t supported: solid purple */
@supports not ((background-clip: text) or (-webkit-background-clip: text)) {
  .intro-text p:hover .highlight,
  .link-card:hover h3,
  .footer a:hover,
  .ltdr-card:hover .ltdr-card-quote,
  .nav-links a:hover,
  .nav-links a:active,
  .nav .logo-section:hover .logo,
  .nav .logo-section:hover .subtitle-nav,
  .nav .logo-section:active .logo,
  .nav .logo-section:active .subtitle-nav {
    background: none;
    -webkit-text-fill-color: unset;
    color: var(--color-accent);
  }
}

.intro-text .intro-spacer {
  margin-bottom: 30px;
}

/* --------------------------------------------------------------------------
   Floating object (3D wireframe sphere) - optional decorative element
   -------------------------------------------------------------------------- */
.floating-object {
  position: fixed;
  top: 20%;
  right: 15%;
  width: 180px;
  height: 180px;
  z-index: 100;
  cursor: grab;
  opacity: 1;
}

.floating-object:active {
  cursor: grabbing;
}

.wireframe-sphere {
  width: 100%;
  height: 100%;
  position: relative;
  animation: sphereRotate 20s linear infinite;
  transform-style: preserve-3d;
  perspective: 1000px;
}

.latitude-line,
.longitude-line {
  position: absolute;
  left: 50%;
  top: 50%;
  border: 1px solid rgba(255, 255, 255, 0.8);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transform-style: preserve-3d;
}

.latitude-line:nth-child(1) { width: 100%; height: 100%; opacity: 1; }
.latitude-line:nth-child(2) { width: 90%; height: 45%; opacity: 0.8; }
.latitude-line:nth-child(3) {
  width: 90%; height: 45%;
  transform: translate(-50%, -50%) translateY(20px);
  opacity: 0.8;
}
.latitude-line:nth-child(4) { width: 70%; height: 25%; opacity: 0.6; }
.latitude-line:nth-child(5) {
  width: 70%; height: 25%;
  transform: translate(-50%, -50%) translateY(35px);
  opacity: 0.6;
}
.latitude-line:nth-child(6) { width: 40%; height: 10%; opacity: 0.4; }
.latitude-line:nth-child(7) {
  width: 40%; height: 10%;
  transform: translate(-50%, -50%) translateY(50px);
  opacity: 0.4;
}

.longitude-line:nth-child(8) {
  width: 100%; height: 100%;
  transform: translate(-50%, -50%) rotateY(0deg);
  opacity: 1;
}
.longitude-line:nth-child(9) {
  width: 100%; height: 100%;
  transform: translate(-50%, -50%) rotateY(30deg);
  opacity: 0.8;
}
.longitude-line:nth-child(10) {
  width: 100%; height: 100%;
  transform: translate(-50%, -50%) rotateY(60deg);
  opacity: 0.6;
}
.longitude-line:nth-child(11) {
  width: 100%; height: 100%;
  transform: translate(-50%, -50%) rotateY(90deg);
  opacity: 1;
}
.longitude-line:nth-child(12) {
  width: 100%; height: 100%;
  transform: translate(-50%, -50%) rotateY(120deg);
  opacity: 0.6;
}
.longitude-line:nth-child(13) {
  width: 100%; height: 100%;
  transform: translate(-50%, -50%) rotateY(150deg);
  opacity: 0.8;
}

@keyframes sphereRotate {
  0%   { transform: rotateY(0deg) rotateX(0deg); }
  100% { transform: rotateY(360deg) rotateX(20deg); }
}

/* --------------------------------------------------------------------------
   Reading list (home)
   -------------------------------------------------------------------------- */
.reading-list {
  margin-top: var(--spacing-section);
}

.reading-list h2 {
  font-size: 24px;
  font-weight: var(--font-weight-normal);
  margin-bottom: var(--spacing-section);
  color: var(--color-text);
  letter-spacing: -0.3px;
}

.links-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--spacing-grid-gap);
}

.link-card {
  padding: 0;
  transition: all 0.3s ease;
}

/* Same wash effect on reading list card titles */
.link-card h3 {
  color: var(--color-text);
  font-size: var(--font-size-card-title);
  font-weight: var(--font-weight-normal);
  margin-bottom: 6px;
  letter-spacing: -0.2px;
  background: var(--rainbow-wash-card);
  background-size: 200% 100%;
  background-position: 0% 0;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  transition: background-position 0.85s cubic-bezier(0.25, 0.46, 0.45, 0.94), -webkit-background-clip 0.35s ease, background-clip 0.35s ease;
}

.link-card:hover h3 {
  background-position: -100% 0;
}

.link-card:hover p {
  color: var(--color-text-muted);
}

.link-card p {
  color: var(--color-text-quiet);
  font-size: var(--font-size-card-desc);
  font-weight: var(--font-weight-light);
  line-height: 1.5;
  letter-spacing: 0.1px;
  transition: color 0.3s ease;
}

.link-card a {
  color: inherit;
  text-decoration: none;
  display: block;
  cursor: pointer;
}

/* --------------------------------------------------------------------------
   Footer
   -------------------------------------------------------------------------- */
.footer {
  margin-top: 80px;
  padding-top: var(--spacing-section);
  border-top: 1px solid var(--color-border);
}

.footer a {
  color: var(--color-text);
  text-decoration: none;
  font-size: var(--font-size-footer);
  font-weight: var(--font-weight-light);
  letter-spacing: -1.2px;
  line-height: 1.1;
  display: block;
  text-align: left;
  cursor: pointer;
  background: var(--rainbow-wash-footer);
  background-size: 200% 100%;
  background-position: 0% 0;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  transition: background-position 1s cubic-bezier(0.25, 0.46, 0.45, 0.94), -webkit-background-clip 0.35s ease, background-clip 0.35s ease;
}

.footer a:hover {
  background-position: -100% 0;
}

.footer a .smiley {
  font-size: var(--font-size-smiley);
  vertical-align: -6px;
}

.small-footer {
  margin-top: var(--spacing-section);
  padding-top: 20px;
  border-top: 1px solid var(--color-border);
}

.small-footer p {
  color: var(--color-text-dim);
  font-size: 12px;
  font-weight: var(--font-weight-light);
  letter-spacing: 0.2px;
  text-align: left;
}

/* --------------------------------------------------------------------------
   Workshop info page
   -------------------------------------------------------------------------- */
.workshop-content {
  max-width: var(--max-width-content);
}

.workshop-content h1 {
  font-size: 32px;
  margin-bottom: 20px;
}

.workshop-content h2 {
  font-size: 24px;
  margin: 40px 0 20px 0;
  color: var(--color-text);
}

.workshop-content p {
  margin-bottom: 20px;
  color: var(--color-text-muted);
}

/* --------------------------------------------------------------------------
   Themes page - intro and tension list (replaces inline styles)
   -------------------------------------------------------------------------- */
.themes-content {
  max-width: none;
}

.themes-content h1 {
  font-size: 32px;
  margin-bottom: 20px;
}

/* Intro text above and below the cube on Explore Themes page */
#themes .themes-intro-top,
#themes .themes-intro-bottom {
  color: var(--color-text-muted);
  font-weight: var(--font-weight-light);
  width: 30%;
  max-width: 420px;
  letter-spacing: 0.2px;
}

#themes .themes-intro-top {
  font-size: 20px;
}

#themes .themes-intro-bottom {
  font-size: 15px;
}

#themes .themes-intro-top {
  margin-bottom: var(--spacing-section);
}

#themes .themes-intro-bottom {
  margin-top: var(--spacing-section);
  margin-bottom: 0;
  opacity: 0.8;
}

/* Tension view: cube 60% smaller, top-right under menu; hide intro/bottom; show back link */
body.tension-view #themes .themes-intro-top,
body.tension-view #themes .themes-intro-bottom {
  display: none;
}

.themes-cube-perspective-wrap {
  display: contents;
}

/* Cube in tension view: same size as themes state (40vmin), right half of viewport so text stays clear */
body.tension-view .themes-cube-perspective-wrap {
  display: flex;
  align-items: center;
  justify-content: center;
  position: fixed;
  top: 0;
  left: 50%;
  width: 50%;
  height: 100vh;
  perspective: 800px;
  perspective-origin: 50% 50%;
  z-index: 10;
  pointer-events: none;
}

body.tension-view .themes-cube-perspective-wrap .themes-cube-wrapper {
  width: 40vmin;
  height: 40vmin;
  pointer-events: none;
}

body.tension-view .themes-page-scene {
  min-height: 0;
  margin-top: 0;
  padding: 0;
  position: static;
}

body.tension-view .themes-starfield {
  display: none;
}

body.tension-view .logo,
body.tension-view .subtitle-nav,
body.tension-view .nav-links a {
  color: #000;
}

/* On non-black background (tension view): menu hover and click = white */
body.tension-view .nav-links a:hover,
body.tension-view .nav-links a:active,
body.tension-view .nav .logo-section:hover .logo,
body.tension-view .nav .logo-section:hover .subtitle-nav,
body.tension-view .nav .logo-section:active .logo,
body.tension-view .nav .logo-section:active .subtitle-nav {
  background: none;
  -webkit-text-fill-color: unset;
  color: #fff;
}

/* Tension view: underline draws; gradient background uses currentColor, no blur */
body.tension-view .nav-links a::after {
  background: currentColor;
  box-shadow: none;
}
body.tension-view .nav-links a:hover::after,
body.tension-view .nav-links a:active::after {
  background: currentColor;
  box-shadow: none;
}
body.tension-view .nav-links a.nav-current::after {
  width: 100%;
  background: currentColor;
  box-shadow: none;
  transition: width 0.22s ease-out 0.4s, background 0.3s ease 0.15s;
}
/* When hovering a different link in tension view, revert immediately. */
body.tension-view .nav-links:has(a:hover) .nav-current:not(:hover)::after {
  width: 0;
  transition: width 0.22s ease-out 0s, background 0.3s ease 0.15s;
}

body.tension-view .cube-tension-title {
  font-size: clamp(1rem, 4vmin, 1.5rem);
  line-height: 1.35;
  color: #fff;
}

body.tension-view .cube-face {
  background: #000;
  box-shadow: inset 0 0 1px 2px #fff;
}

body.tension-view .cube-face-inner {
  padding: 1.5rem;
  color: #fff;
}

/* Tension detail content panel (same styling as main intro text, black in tension view) */
.tension-content-panel {
  display: none;
}

body.tension-view .tension-content-panel {
  display: block;
  position: relative;
  z-index: 5;
  max-width: 55%;
  user-select: none;
  -webkit-user-select: none;
  margin-left: 0;
  margin-top: 1rem;
  padding-right: 1rem;
  padding-bottom: 5rem;
}

body.tension-view .tension-content {
  font-size: var(--font-size-intro);
  font-weight: var(--font-weight-light);
  line-height: 1.3;
  color: #000;
  letter-spacing: var(--letter-spacing-tight);
}

body.tension-view .tension-content p {
  margin-bottom: 1.25em;
}

body.tension-view .tension-content p:last-child {
  margin-bottom: 0;
}

.tension-back-wrap {
  margin-top: 2em;
  margin-bottom: 0;
}

body.tension-view .tension-back-link {
  font-size: 0.95rem;
  color: #000;
  text-decoration: none;
  letter-spacing: 0.2px;
}

body.tension-view .tension-back-link:hover {
  text-decoration: underline;
  text-underline-offset: 3px;
}

body.tension-view .tension-content-title {
  font-size: var(--font-size-intro);
  font-weight: var(--font-weight-normal);
  color: #000;
  margin-bottom: 1em;
  letter-spacing: var(--letter-spacing-tight);
}

/* 3D theme cube: black box, 2px white outline, ~40% viewport; click+drag to rotate */
.themes-page-scene {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 70vh;
  margin-top: calc(-8rem + 10px + 5vh);
  padding: var(--spacing-section);
  perspective: 800px;
  perspective-origin: 50% 50%;
  transform-style: preserve-3d;
  user-select: none;
}

/* Starfield: full-page twinkling stars (space look), only visible on Explore Themes) */
.themes-starfield {
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9998;
  display: none;
}

.themes-cube-wrapper {
  width: 40vmin;
  height: 40vmin;
  position: relative;
  z-index: 1;
  transform-style: preserve-3d;
  will-change: transform;
  user-select: none;
}

/* Cube appears all at once after a short delay when entering Explore Themes */
#themes.active .themes-cube-wrapper {
  opacity: 0;
}
#themes.active.cube-visible .themes-cube-wrapper {
  opacity: 1;
}

.cube-face {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #000;
  /* Inset box-shadow with slight blur for a softer edge on the cube lines */
  box-shadow: inset 0 0 1px 2px #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  backface-visibility: hidden;
  overflow: hidden;
  transform-style: preserve-3d;
  user-select: none;
}

.cube-face-inner {
  padding: 1.5rem;
  text-align: center;
  color: var(--color-text);
  font-family: var(--font-family);
  font-weight: var(--font-weight-normal);
  letter-spacing: var(--letter-spacing-tight);
}

.cube-tension-title {
  display: block;
  font-size: clamp(1rem, 4vmin, 1.5rem);
  line-height: 1.35;
  color: var(--color-text);
}

.cube-label {
  font-size: clamp(0.85rem, 2.2vmin, 1rem);
  font-weight: var(--font-weight-normal);
  color: var(--color-text);
}

/* 3D positions: each face is 40vmin wide/tall, cube depth = 40vmin, so half = 20vmin */
.face-front  { transform: translateZ(20vmin); }
.face-back   { transform: rotateY(180deg) translateZ(20vmin); }
.face-right  { transform: rotateY(90deg) translateZ(20vmin); }
.face-left   { transform: rotateY(-90deg) translateZ(20vmin); }
.face-top    { transform: rotateX(90deg) translateZ(20vmin); }
.face-bottom { transform: rotateX(-90deg) translateZ(20vmin); }

.themes-intro {
  color: var(--color-text-muted);
  margin-bottom: 40px;
  width: 30%;
  font-size: 20px;
  text-align: left;
}

.themes-tension-list {
  margin-bottom: 60px;
  margin-right: 15%;
  font-size: 43.2px;
  font-weight: var(--font-weight-light);
  line-height: 1.3;
  color: var(--color-text-muted);
  letter-spacing: var(--letter-spacing-tight);
}

.tension-item {
  margin-bottom: 40px;
}

.tension-item:first-child {
  margin-bottom: 40px;
}

.tension-item + .tension-item {
  border-top: 1px solid var(--color-border);
  padding-top: 40px;
}

.tension-item strong {
  color: var(--color-text);
  font-weight: var(--font-weight-normal);
}

/* --------------------------------------------------------------------------
   TL;DR page - floating overlapping cards, vertical scroll, hover to front + rainbow text
   -------------------------------------------------------------------------- */
/* Highlights page above starfield so black cards are opaque (stars show only in gaps) */
#ltdr.page {
  position: relative;
  z-index: 9999;
}

.ltdr-content {
  max-width: var(--max-width-container);
}

.ltdr-intro {
  color: var(--color-text-muted);
  font-weight: var(--font-weight-light);
  font-size: 20px;
  width: 40%;
  max-width: 420px;
  letter-spacing: 0.2px;
  margin: 0 0 3rem 0;
  padding: 0;
  text-align: left;
}

.ltdr-cards-stack {
  position: relative;
  padding: 2rem 0 0.75rem;
  min-height: 130vh;
  perspective: 1200px;
  --cursor-tilt-x: 0deg;
  --cursor-tilt-y: 0deg;
}

/* Floating overlapping cards: black, randomly placed, bobbing + cursor-follow 3D */
.ltdr-card {
  position: absolute;
  width: 42%;
  max-width: 320px;
  min-height: 200px;
  padding: 2rem 1.75rem;
  border: 1px solid rgba(255, 255, 255, 0.35);
  border-radius: 8px;
  background: #000;
  transform-style: preserve-3d;
  backface-visibility: hidden;
  --card-z: 0;
  /* --card-z is animated by Motion (js/ltdr-card-motion.js) for smooth spring hover */
  transition: z-index 0.2s step-end, border-color 0.35s cubic-bezier(0.34, 1.56, 0.64, 1),
    box-shadow 0.35s cubic-bezier(0.34, 1.56, 0.64, 1),
    background 0.35s ease, -webkit-background-clip 0.35s ease, background-clip 0.35s ease;
  cursor: grab;
  animation: ltdr-bob 4s ease-in-out infinite;
  animation-delay: var(--card-delay, 0s);
}

@keyframes ltdr-bob {
  0%, 100% { transform: translateY(0) translateZ(var(--card-z, 0)) rotateX(var(--cursor-tilt-x)) rotateY(var(--cursor-tilt-y)); }
  50% { transform: translateY(-8px) translateZ(var(--card-z, 0)) rotateX(var(--cursor-tilt-x)) rotateY(var(--cursor-tilt-y)); }
}

/* 3 rows, random and spaced across viewport width */
.ltdr-card:nth-child(1)  { top: 2%;   left: 0%;   z-index: 1;  --card-delay: 0s; }
.ltdr-card:nth-child(2)  { top: calc(4% + 3rem); left: 38%;  z-index: 2;  --card-delay: 0.4s; }
.ltdr-card:nth-child(3)  { top: 0%;   left: 58%;  z-index: 3;  --card-delay: 0.8s; }
.ltdr-card:nth-child(4)  { top: calc(8% + 6rem); left: 22%;  z-index: 4;  --card-delay: 0.2s; }
.ltdr-card:nth-child(5)  { top: calc(33% - 3rem); left: 8%;   z-index: 5;  --card-delay: 0.6s; }
.ltdr-card:nth-child(6)  { top: 35%;  left: calc(38% - 5rem); z-index: 6;  --card-delay: 0.1s; }
.ltdr-card:nth-child(7)  { top: 29%;  left: 58%;  z-index: 7;  --card-delay: 0.5s; }
.ltdr-card:nth-child(8)  { top: calc(57% - 6rem); left: 4%;   z-index: 8;  --card-delay: 0.9s; }
.ltdr-card:nth-child(9)  { top: 54%;  left: 35%;  z-index: 9;  --card-delay: 0.3s; }
.ltdr-card:nth-child(10) { top: 58%;  left: 58%;  z-index: 10; --card-delay: 0.7s; }

/* Hovered card comes forward (--card-z set by Motion); visual feedback */
.ltdr-card:hover {
  z-index: 100;
  border-color: rgba(255, 255, 255, 0.5);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
}

.ltdr-card.is-dragging {
  cursor: grabbing;
  z-index: 200;
  animation: none;
  user-select: none;
}

/* Rainbow text on card hover – quote only, diagonal gradient */
.ltdr-card-quote {
  background: var(--rainbow-wash-ltdr);
  background-size: 220% 220%;
  background-position: 0% 0%;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  transition: background-position 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), -webkit-background-clip 0.35s ease, background-clip 0.35s ease;
}

.ltdr-card:hover .ltdr-card-quote {
  background-position: -100% -100%;
}

.ltdr-card-quote {
  font-size: clamp(1.15rem, 2.5vw, 1.5rem);
  font-weight: var(--font-weight-light);
  line-height: 1.4;
  letter-spacing: var(--letter-spacing-tight);
  margin: 0 0 0.75rem 0;
}

.ltdr-card-source {
  font-size: 0.95rem;
  color: var(--color-quote-cite);
  margin-top: auto;
}

.ltdr-card-source a {
  color: inherit;
  text-decoration: none;
}

.ltdr-card-source a:hover {
  text-decoration: underline;
}

/* --------------------------------------------------------------------------
   Gallery: separate page only (never a section on other pages).
   Layout and visibility only when this page is active.
   -------------------------------------------------------------------------- */
#gallery.gallery-page.page:not(.active) {
  display: none !important;
}

#gallery.gallery-page.page.active {
  background: #000;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  padding-bottom: 20rem;
  overflow: hidden;
}

/* No left padding: align with logo (container already has padding-left) */
.gallery-page-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 0 var(--spacing-page) 0 0;
}

/* Gallery intro: same place and position as Explore Themes intro text */
#gallery .gallery-intro {
  color: var(--color-text-muted);
  font-weight: var(--font-weight-light);
  font-size: 20px;
  width: 30%;
  max-width: 420px;
  letter-spacing: 0.2px;
  margin-bottom: var(--spacing-section);
}

#gallery .gallery-hint {
  font-size: 15px;
  color: var(--color-text-muted);
  font-weight: var(--font-weight-light);
  letter-spacing: 0.2px;
  width: 30%;
  max-width: 420px;
  margin-top: var(--spacing-section);
  margin-bottom: 0;
  opacity: 0.8;
}

.gallery-scene {
  flex: 1;
  min-height: 70vh;
  margin-top: calc(-8rem + 10px + 5vh);
  padding: var(--spacing-section) var(--spacing-section) var(--spacing-section) 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  z-index: 10;
}

.gallery-orbit {
  position: relative;
  z-index: 10;
  width: 100%;
  min-height: 55vh;
  margin: 0 auto;
  padding: 0 10px 0 20px;
  box-sizing: border-box;
  transform: scale(0.97);
  transform-origin: center center;
  perspective: 800px;
}

.gallery-card {
  position: absolute;
  left: 50%;
  top: 50%;
  /* width, height, margin set in JS from each image's aspect ratio */
  min-width: 120px;
  min-height: 96px;
  margin-left: -60px;
  margin-top: -48px;
  background: #0a0a0a;
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 16px;
  transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  pointer-events: auto;
  cursor: pointer;
  overflow: hidden;
  --card-darken: 0;
  --card-tilt-x: 0deg;
  --card-tilt-y: 0deg;
  transform-style: preserve-3d;
}

/* Darker overlay as cards move back (set in JS); front card stays bright */
.gallery-card::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, var(--card-darken, 0));
  border-radius: 15px;
  pointer-events: none;
}

.gallery-card img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
  border-radius: 15px;
}

/* Card size is set in JS from each image's aspect ratio */

/* Full-size lightbox when clicking a gallery image */
.gallery-lightbox {
  display: none;
  position: fixed;
  inset: 0;
  z-index: 100000;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  box-sizing: border-box;
}

.gallery-lightbox.is-open {
  display: flex;
}

.gallery-lightbox-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.9);
  cursor: pointer;
}

.gallery-lightbox-img {
  position: relative;
  z-index: 1;
  max-width: 90vw;
  max-height: 90vh;
  width: auto;
  height: auto;
  object-fit: contain;
  cursor: pointer;
  border-radius: 4px;
}

.quote-container {
  background: #111;
  padding: 40px;
  border-radius: 8px;
  margin: 40px 0;
  text-align: center;
}

.quote-container blockquote {
  font-size: 24px;
  font-style: italic;
  color: var(--color-text);
  margin-bottom: 20px;
}

.quote-container cite {
  color: var(--color-quote-cite);
  font-size: 16px;
}

/* Theme section / highlight (if used elsewhere) */
.theme-section {
  margin-bottom: 60px;
}

.theme-section h2 {
  font-size: 24px;
  margin: 40px 0 20px 0;
  color: var(--color-text);
}

.theme-section p {
  margin-bottom: 20px;
  color: var(--color-text-muted);
}

.theme-highlight {
  background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%);
  padding: 30px;
  border-radius: 12px;
  margin: 30px 0;
}

.theme-highlight h3 {
  color: var(--color-text);
  font-size: 20px;
  margin-bottom: 15px;
  font-weight: var(--font-weight-normal);
}

.theme-highlight p {
  color: rgba(255, 255, 255, 0.9);
  font-size: 16px;
  line-height: 1.6;
}

.theme-list {
  list-style: none;
  padding: 0;
}

.theme-list li {
  padding: 15px 0;
  border-bottom: 1px solid var(--color-border);
  color: var(--color-text-muted);
}

.theme-list li:last-child {
  border-bottom: none;
}

.theme-list li strong {
  color: var(--color-text);
  font-weight: var(--font-weight-normal);
}

/* --------------------------------------------------------------------------
   Interactive elements - show pointer where needed (body has cursor: none)
   -------------------------------------------------------------------------- */
a,
button,
.logo-section,
.floating-object {
  cursor: pointer !important;
}

.themes-cube-wrapper {
  cursor: grab;
}

body.cube-dragging .themes-cube-wrapper {
  cursor: grabbing;
}

/* Prevent text selection anywhere on the page while dragging the cube */
body.cube-dragging {
  user-select: none;
}

/* --------------------------------------------------------------------------
   Responsive breakpoints
   -------------------------------------------------------------------------- */
@media (max-width: 1024px) {
  .links-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (max-width: 800px) {
  .themes-intro {
    width: 60% !important;
  }

  .ltdr-intro {
    width: 60% !important;
  }
}

@media (max-width: 768px) {
  .links-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .nav {
    flex-direction: column;
    gap: 20px;
    align-items: flex-start;
  }

  .nav-links {
    flex-wrap: wrap;
    gap: 30px;
  }

  body {
    padding: 20px 15px;
  }
}

@media (max-width: 450px) {
  .links-grid {
    grid-template-columns: 1fr;
  }

  .intro-text {
    font-size: 21px;
  }

  .footer a {
    font-size: 38.4px;
  }

  .link-card {
    margin-right: 40%;
  }

  .themes-tension-list {
    font-size: 27px !important;
  }

  .ltdr-card-quote {
    font-size: 1.2rem !important;
  }
}
